<div class="search-section text-center py-3 p-4">
  <h2 class="display-4">Encuentra tu profe ideal</h2>
  <form [formGroup]="searchForm" (ngSubmit)="getSearchForm()">
    <div class="d-flex flex-column justify-content-center  mt-4">
      <div>
        <h4>Seleccionar materia </h4>
      </div>
      <mat-button-toggle-group name="categories" aria-label="Categories"
        [hideMultipleSelectionIndicator]="hideMultipleSelectionIndicator()" multiple formControlName="selectedCategory">

        @for (category of allCategories; track $index) {<mat-button-toggle mat-raised-button color=""
          class="category-item me-3 d-flex align-items-start" type="button" [value]="category.id"
          [checked]="selectedCategory.includes(category.category_name)">
          <mat-icon class="icon-accent">{{category.description}}</mat-icon> {{ category.category_name }}
        </mat-button-toggle>}
      </mat-button-toggle-group>
    </div>

    <div class="input-group mt-4 justify-content-around align-items-start">
      <div>
        <mat-form-field class="example-full-width" appearance="outline">
          <mat-label>Nombre del profesor</mat-label>
          <input type="text" matInput [matAutocomplete]="autoName" formControlName="inputName">
          <mat-autocomplete #autoName="matAutocomplete">
            @for (teacher of filterName | async; track $index) {
            <mat-option [value]="teacher">{{teacher}}</mat-option>
            }
          </mat-autocomplete>
        </mat-form-field>
      </div>
      <div class=" d-flex align-self-center">
        <mat-button-toggle-group appearance="legacy" name="fontStyle" aria-label="Font Style" formControlName="type" multiple>
          @for (modality of allModalities; track $index) {
            <mat-button-toggle [value]="modality.id">{{modality.type}}</mat-button-toggle>
          }
        </mat-button-toggle-group>
      </div>

      <div>
        <mat-form-field class="example-full-width" appearance="outline">
          <mat-label>Nombre de la ciudad</mat-label>
          <input type="text" matInput [matAutocomplete]="autoCity" formControlName="inputCity">
          <mat-autocomplete #autoCity="matAutocomplete" (optionSelected)="cityCenter()">
            @for (city of filterCity | async; track $index) {
            <mat-option [value]="city">{{city}}</mat-option>
            }
          </mat-autocomplete>
        </mat-form-field>
      </div>
    </div>

    <div class="row">
      <div class="col-4 align-self-start">
        <label>Selecciona tu radio de busqueda</label>
        <mat-slider min="1" max="15" step="1" showTickMarks discrete [displayWith]="formatLabel">
          <input matSliderThumb type="range" [value]="radius" (input)="changeRadius($event)">
        </mat-slider>
        <label>{{radius}}</label>
      </div>
      <div class="col-4 align-self-start">
        <label for="">Selecciona tu precio</label>
        <mat-slider min="100" max="1000" showTickMarks discrete>
          <input value="300" formControlName="minPrice" matSliderStartThumb>
          <input value="600" formControlName="maxPrice" matSliderEndThumb>
        </mat-slider>
      </div>
      <div class="col-4 align-self-start">
        <label for="">Selecciona la puntiacion</label>
        <mat-slider min="0" max="10" [displayWith]="formatLabelScore">
          <input value="5" formControlName="score" matSliderThumb>
        </mat-slider>
        <label>{{searchForm.value.score}}</label>
      </div>

    </div>
    <button mat-raised-button>Buscar</button>
  </form>
</div>

<div class="row">
  <div class="col">
    <app-map-component [latCity]="latCity" [lngCity]="lngCity" [AAteacherFilter]="teacherFilter" [radius]="radius" (zoom)="zoom($event)" (bounds)="getBounds($event)"></app-map-component>
  </div>
  <div class="col d-flex flex-column test">
  <div [class.cardActive]="cardActive" class="card_container">
    @for (teacher of teacherFilter; track $index) {
      <mat-card class="d-flex flex-row justify-content-between mb-2" appearance="outlined">
        <div class="d-flex flex-column pt-2 ps-2">
          <div class="d-flex flex-row gap-3">
            <img mat-card-avatar class="rounded-circle" src="https://material.angular.io/assets/img/examples/shiba2.jpg" >
            <mat-card-title>{{teacher.name}}</mat-card-title>
            
            
          </div>
          <div class="d-flex justify-content-start mt-auto">
            <a (click)="openDialog($event, teacher)"><small class="text">Ver detalles</small></a>
  
          </div>
  
        </div>
        <div class="p-2">
          <p>Puntuacion: ⭐️</p>
          <p class="m-0">Precio:</p>
          <p class="m-0">Materia: matematicas, programacion</p>

        </div>

   
      </mat-card>
    }
  </div>


  </div>
  
</div>